{% extends "base.html" %}
{% load static %}
{# Šablona pro seznam kvízů a aktivních sezení #}

{% block body_class %}template-quiz-list{% endblock %}

{% block content %}
<div class="container quiz-list-container">
  <h1 class="quiz-list-header">Moje kvízy</h1>
  {# Akční tlačítka pro vytvoření kvízu a správu #}
  <div class="quiz-list-actions">
    {% if is_teacher %}
      <a href="{% url 'quiz_create' %}" class="btn primary">Vytvořit kvíz</a>
      <a href="/admin/" class="btn">Spravovat v administraci</a>
    {% endif %}
  </div>

  {# Tabulka s kvízy uživatele #}
  <div class="card card-overflow">
    <table class="quiz-table">
      <thead>
        <tr>
          <th>Název</th>
          <th>Kód</th>
          <th>Akce</th>
        </tr>
      </thead>
      <tbody>
        {% for quiz in quizzes %}
        <tr>
          <td>{{ quiz.title }}</td>
          <td><strong>{{ quiz.join_code }}</strong></td>
          <td>
            <div class="quiz-actions">
              <a href="{% url 'session_create' quiz.id %}">Start live</a>
              <a href="{% url 'quiz_start' quiz.id %}">Spustit</a>
              <a href="{% url 'quiz_update' quiz.id %}">Upravit</a>
              <a href="{% url 'quiz_delete' quiz.id %}" class="delete">Smazat</a>
            </div>
          </td>
        </tr>
        {% empty %}
        <tr>
          <td colspan="3" class="quiz-table-empty">Zatím žádné kvízy.</td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>
</div>

{# Sekce s aktivními sezeními #}
<div class="container quiz-list-container quiz-list-container-margin">
  <h2 class="quiz-list-subtitle">Aktivní sezení</h2>
  <div class="card pad">
    <ul class="active-sessions-list">
      {% for s in active_sessions %}
        <li class="session-item">
          <span>Kód: <strong>{{ s.code }}</strong></span>
          <div class="session-item-actions">
            <a href="{% url 'session_lobby' s.hash %}" class="btn">Lobby</a>
            <a href="{% url 'session_results' s.hash %}" class="btn">Výsledky</a>
          </div>
        </li>
      {% empty %}
        <li class="session-item session-item-empty">Žádná aktivní sezení.</li>
      {% endfor %}
    </ul>
  </div>
</div>
{% endblock %}
